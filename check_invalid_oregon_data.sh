#!/bin/bash

# Base URL of the API endpoint
base_url="https://gis.wrd.state.or.us/server/rest/services/dynamic/Gaging_Stations_WGS84/FeatureServer/2/query"

# List of station numbers to check
station_numbers=(
    "10378500" "10392400" "11491400" "11494000" "11494510" 
    "11495900" "11497500" "11497550" "11500400" "11500500" 
    "11502550" "11503500" "11504103" "11504109" "11504120" 
    "11510000" "13214000" "13215000" "13216500" "13217500" 
    "13269450" "13273000" "13275105" "13275300" "13281200" 
    "13282550" "13317850" "13318060" "13318210" "13318920" 
    "13325500" "13329100" "13329765" "13330000" "13330300" 
    "13330500" "13331450" "14010000" "14010800" "14021000" 
    "14022500" "14023500" "14024300" "14025000" "14026000" 
    "14029900" "14031050" "14031600" "14032000" "14032400" 
    "14039500" "14054000" "14056500" "14060000" "14063000" 
    "14064500" "14070920" "14070980" "14073520" "14074900" 
    "14075000" "14076020" "14076100" "14079800" "14080500" 
    "14081500" "14082550" "14083400" "14085700" "14087300" 
    "14088500" "14095250" "14095255" "14104125" "14104190" 
    "14104700" "14104800" "14105545" "14105550" "14192500" 
    "14193000" "14202510" "14202850" "14306820" "14306900" 
    "14320700" "14327120" "14327122" "14327137" "14327300" 
    "14335200" "14335230" "14335235" "14335250" "14335300" 
    "14335500" "14336700" "14337000" "14340800" "14341610" 
    "14342500" "14343000" "14346700" "14346900" "14347800" 
    "14348080" "14348500" "14350900" "14352000" "14352001" 
    "14354100" "14354950" "14355875" "14357000" "14357503" 
    "14358610" "14358680" "14358725" "14358750" "14358800" 
    "14360500" "14363450" "14365500" "14368300" "14375200" 
    "14400200"
)

# Loop through each station number
for station in "${station_numbers[@]}"; do
    # Construct the query URL
    query_url="${base_url}?where=station_nbr+IN+('%${station}%')&outFields=*&f=json"
    
    # Query the API and get the response code
    response=$(curl -s -o /dev/null -w "%{http_code}" "$query_url")

    # Check if the response is 404
    if [ "$response" -eq 404 ]; then
        echo "Invalid station number: $station"
    fi
done
